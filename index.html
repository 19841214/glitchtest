<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SIVC Decoder Mobile</title>
    <style>
        :root { --neon: #00ff41; --bg: #050505; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            background: var(--bg); color: var(--neon); 
            font-family: 'Share Tech Mono', monospace; 
            margin: 0; padding: 10px;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; touch-action: manipulation;
        }

        /* 啟動覆蓋層 */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 999; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.5s; cursor: pointer;
        }
        #overlay .box { border: 1px solid var(--neon); padding: 30px; text-align: center; }

        #header { width: 100%; text-align: center; padding: 15px 0; }
        h1 { margin: 0; font-size: 1.1rem; letter-spacing: 2px; text-shadow: 0 0 8px var(--neon); }

        #monitor-shell {
            width: 100%; max-width: 400px;
            border: 2px solid #222; background: #000;
            border-radius: 8px; position: relative;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.1);
        }

        #container { width: 100%; aspect-ratio: 4 / 3; overflow: hidden; position: relative; }
        canvas { width: 100%; height: 100%; display: block; }

        .controls { 
            width: 100%; max-width: 400px;
            margin-top: 15px; display: flex; flex-direction: column; gap: 15px;
            background: rgba(20, 20, 20, 0.9); padding: 20px; border-radius: 8px;
        }
        .slider-group { display: grid; grid-template-columns: 40px 1fr; align-items: center; gap: 15px; }
        .slider-group label { font-size: 20px; font-weight: bold; text-align: center; }
        
        input[type=range] { -webkit-appearance: none; width: 100%; height: 12px; background: #1a1a1a; border-radius: 10px; outline: none; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 35px; height: 35px; 
            background: var(--neon); border-radius: 5px; cursor: pointer;
            box-shadow: 0 0 10px var(--neon);
        }

        .status-footer { width: 100%; max-width: 400px; margin-top: auto; padding: 15px 0; display: flex; justify-content: space-between; font-size: 10px; opacity: 0.6; }
        .success-glow { color: #fff; text-shadow: 0 0 15px var(--neon); animation: pulse 0.8s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body>

    <div id="overlay" onclick="startSystem()">
        <div class="box">
            <p>ENCRYPTED SIGNAL DETECTED</p>
            <p style="font-size: 12px; margin-top: 10px;">[ TAP TO INITIALIZE DECODER ]</p>
        </div>
    </div>

    <div id="header">
        <h1 id="title">ANALOG SIGNAL DECRYPTION</h1>
    </div>
    
    <div id="monitor-shell">
        <div id="container">
            <canvas id="glitchCanvas"></canvas>
        </div>
    </div>

    <div class="controls">
        <div class="slider-group">
            <label>誠</label><input type="range" id="s1" min="0" max="9" value="0">
        </div>
        <div class="slider-group">
            <label>正</label><input type="range" id="s2" min="0" max="9" value="0">
        </div>
        <div class="slider-group">
            <label>專</label><input type="range" id="s3" min="0" max="9" value="0">
        </div>
        <div class="slider-group">
            <label>精</label><input type="range" id="s4" min="0" max="9" value="0">
        </div>
    </div>

    <div class="status-footer">
        <span id="sync-val">SYNC: 0%</span>
        <span>ID: SIVC-CORE-1938</span>
    </div>

    <script>
        const canvas = document.getElementById('glitchCanvas');
        const ctx = canvas.getContext('2d');
        const sliders = [document.getElementById('s1'), document.getElementById('s2'), document.getElementById('s3'), document.getElementById('s4')];
        const title = document.getElementById('title');
        const syncVal = document.getElementById('sync-val');
        const target = [1, 9, 3, 8];
        let isStarted = false;
        let successTriggered = false;

        // 音效設定
        const audioBGM = new Audio('https://cdn.pixabay.com/download/audio/2026/01/08/audio_626068a6d9.mp3?filename=freemusicforvideo-dark-ambient-soundscape-dreamscape-462864.mp3');
        audioBGM.loop = true;
        const audioStatic = new Audio('https://cdn.pixabay.com/download/audio/2022/03/24/audio_542fc2b610.mp3?filename=freesound_community-radio-103737.mp3');
        const audioSuccess = new Audio('https://cdn.pixabay.com/download/audio/2022/03/10/audio_eef1737848.mp3?filename=freesound_community-castle-walls-startup-complete-37995.mp3');

        const logo = new Image();
        logo.crossOrigin = "anonymous";
        logo.src = 'https://i.postimg.cc/cHZ70FWn/Logo-SIVC.jpg';

        canvas.width = 400;
        canvas.height = 300;

        function startSystem() {
            document.getElementById('overlay').style.opacity = '0';
            setTimeout(() => document.getElementById('overlay').style.display = 'none', 500);
            audioBGM.volume = 0.5;
            audioBGM.play();
            isStarted = true;
        }

        // 滑桿音效處理
        sliders.forEach(s => {
            s.addEventListener('input', () => {
                if(isStarted && !successTriggered) {
                    audioStatic.currentTime = Math.random() * 5; // 隨機跳轉雜訊點
                    audioStatic.volume = 0.3;
                    audioStatic.play();
                }
            });
        });

        function draw() {
            const vals = sliders.map(s => parseInt(s.value));
            const diff = vals.reduce((acc, v, i) => acc + Math.abs(v - target[i]), 0);
            const sync = Math.max(0, 1 - (diff / 25));
            const isSuccess = (diff === 0);

            ctx.fillStyle = '#050505';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            if (isSuccess) {
                if(!successTriggered) {
                    audioBGM.pause();
                    audioSuccess.play();
                    successTriggered = true;
                }
                ctx.globalAlpha = 1.0;
                ctx.drawImage(logo, (400-180)/2, 30, 180, 180);
                ctx.fillStyle = '#fff';
                ctx.font = '18px Share Tech Mono';
                ctx.textAlign = 'center';
                ctx.fillText("SINCE 1938", 200, 260);
                
                title.innerText = "SIVC CORE RESTORED";
                title.className = "success-glow";
                syncVal.innerText = "SYNC: 100%";
            } else {
                ctx.save();
                ctx.globalAlpha = Math.pow(sync, 6);
                ctx.drawImage(logo, (400-180)/2, 30, 180, 180);
                ctx.restore();

                const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const data = imgData.data;
                for (let i = 0; i < data.length; i += 4) {
                    if (Math.random() > sync * 0.96) {
                        const n = Math.random() * 255 * (1 - sync);
                        data[i] = data[i+1] = data[i+2] = n;
                    }
                }
                ctx.putImageData(imgData, 0, 0);

                if (Math.random() > 0.95) {
                    const y = Math.random() * canvas.height;
                    const h = 5 + Math.random() * 15;
                    const x = (Math.random() - 0.5) * 30 * (1 - sync);
                    ctx.drawImage(canvas, 0, y, canvas.width, h, x, y, canvas.width, h);
                }

                syncVal.innerText = `SYNC: ${Math.floor(sync * 100)}%`;
            }
            requestAnimationFrame(draw);
        }

        logo.onload = () => draw();
    </script>
</body>
</html>